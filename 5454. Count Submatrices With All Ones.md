# [5454. Count Submatrices With All Ones](https://leetcode-cn.com/problems/count-submatrices-with-all-ones/)

#### æ–¹æ³•ä¸€ï¼šæš´åŠ›

1. å…ˆæ±‚æ¯ä¸ªç‚¹çš„ä»Žå³å¼€å§‹æ•°ä¸ºç¬¬å‡ ä¸ªè¿žç»­çš„1ï¼ˆæ±‚æœ€å¤§å­çŸ©é˜µæ—¶ä¹Ÿå¸¸ç”¨ï¼‰
2. ä¸¤ä¸ªç‚¹å¯ä»¥ç¡®å®šä¸€ä¸ªçŸ©é˜µã€‚å› æ­¤å…ˆç¡®å®šçŸ©é˜µçš„å·¦ä¸Šè§’ï¼Œå†ç¡®å®šæ¯ä¸€è¡Œä¸­æœ€è¿œçš„å³ä¸‹è§’ï¼Œä¸¤ç‚¹çš„æ°´å¹³è·ç¦»å³ä¸ºå³ä¸‹è§’åœ¨è¯¥è¡Œä¸­çš„æƒ…å†µä¸‹çŸ©é˜µçš„ä¸ªæ•°ã€‚ðŸ¤¯

##### Python

æ‰§è¡Œç”¨æ—¶ï¼š1532 ms, åœ¨æ‰€æœ‰ Python3 æäº¤ä¸­å‡»è´¥äº†100.00%çš„ç”¨æˆ·

å†…å­˜æ¶ˆè€—ï¼š13.8 MB, åœ¨æ‰€æœ‰ Python3 æäº¤ä¸­å‡»è´¥äº†100.00%çš„ç”¨æˆ·

```python
class Solution:
    def count1(self) ->int:
        rows =len(self.m)
        columns = len(self.m[0])
        self.r0=[[0 for j in range(columns)] for i in range(rows)]
        for j in range(columns-1,-1,-1):
            for i in range(rows):
                if self.m[i][j]==1:
                    if j<columns-1:
                        self.r0[i][j]=self.r0[i][j+1]+1
                    else:
                        self.r0[i][j]=1
                    
                    
    def func(self) ->int:
        rows =len(self.m)
        columns = len(self.m[0])
        re=0
        for i in range(rows):
            for j in range(columns):
                #print (i,i+r,rows,j,columns)
                mid=columns
                for k in range(i,rows):
                    mid=min(mid,self.r0[k][j])
                    re+=mid

        return re
    def numSubmat(self, mat: List[List[int]]) -> int:
        ans=0
        self.m=mat
        self.count1()
        return self.func()
        
```

